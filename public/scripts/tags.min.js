/*! Taufik Nurrohman <https://github.com/tovic> */var Tags=function(e,t){t=t||{};var a=this,n=function(e){return document.createElement(e)},i={join:", ",max:9999,values:!0,d_text:"Duplicate “%s” Tag",x_text:"Remove “%s” Tag",i_class:"tags-input",o_class:"tags-output",w_class:"tags",update:function(){}};a.tags={},"string"==typeof t&&(t={join:t});for(var s in i)void 0===t[s]&&(t[s]=i[s]);a.input=e,a.output=!1,a.config=t,a.sanitize=function(e){return e.replace(/,|^\s+|\s+$|\s{2,}/g,"").toLowerCase()},a.clear=function(){e.value=""},a.add=function(i){var s=e.previousSibling,r=n("span"),u=n("a");r.innerHTML=i,u.title=t.x_text.replace(/%s/g,i),u.setAttribute("data-tag",i),u.href="#tag:remove",u.innerHTML="&times;",u.onclick=function(){return delete a.tags[this.getAttribute("data-tag")],this.parentNode.parentNode.removeChild(this.parentNode),a.refresh(),!1},r.appendChild(u),s.appendChild(r),a.tags[i]=1},a.refresh=function(){var e=Object.keys(a.tags).join(t.join);a.output!==!1&&(a.output.value=e),t.update(a.tags)},a.draw=function(){var i=e,s=i.name,r=n("label");a.output=n("input"),a.output.name=s,a.output.type="hidden",i.removeAttribute("name"),i.className+=" "+t.i_class,r.className=t.w_class,r.innerHTML='<span class="'+t.o_class+'"></span>',i.parentNode.insertBefore(r,i),r.appendChild(i),r.appendChild(a.output),t.values===!0&&(t.values=e.value.split(t.join));for(var u in t.values){var o=a.sanitize(t.values[u]);o&&a.add(o)}},a.beautify=function(){a.draw(),a.clear(),e.onkeydown=function(n){var i=e.previousSibling,s=n.keyCode,r=a.sanitize(this.value);if(""===r&&8===s){var u=i.lastChild;if(u){var o=u.children[0].getAttribute("data-tag");i.removeChild(u),delete a.tags[o]}return a.refresh(),!1}return n.shiftKey||32!==s?void 0:(a.clear(),""===r||Object.keys(a.tags).length===t.max?!1:r in a.tags?(alert(t.d_text.replace(/%s/g,r)),a.clear(),!1):(a.add(r),a.refresh(),!1))},a.refresh()}};
